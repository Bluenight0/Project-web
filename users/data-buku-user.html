<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link rel="shortcut icon" href="../assets/favicon_io/favicon.ico" />
  <title>Data Buku | Perpustakaan</title>
</head>
<body class="bg-gradient-to-br from-gray-800 to-gray-900 min-h-screen text-white font-sans">

  <!-- NAVBAR -->
  <header class="fixed top-0 left-0 w-full z-20 bg-gray-800/60 backdrop-blur-md shadow-md">
    <nav class="flex flex-wrap justify-between items-center px-6 py-3">
      <a href="beranda.html" class="text-white font-bold text-lg bg-white/10 px-4 py-2 rounded-xl hover:bg-white/20 transition">
        Beranda
      </a>
      <div class="flex flex-wrap justify-center gap-2 mt-2 sm:mt-0">
        <a href="data-buku-user.html" class="bg-white/10 text-white/80 px-3 py-1 rounded-xl hover:bg-white/20 transition font-semibold">Buku</a>
        <a href="event.html" class="bg-white/10 text-white/80 px-3 py-1 rounded-xl hover:bg-white/20 transition font-semibold">Event</a>
        <a href="peminjaman.html" class="bg-white/10 text-white/80 px-3 py-1 rounded-xl hover:bg-white/20 transition font-semibold">Peminjaman</a>
        <a href="profil.html" class="bg-white/10 text-white/80 px-3 py-1 rounded-xl hover:bg-white/20 transition font-semibold">Profile</a>
        <a href="../login.html" class="bg-white/10 text-white/80 px-3 py-1 rounded-xl hover:bg-white/20 transition font-semibold">Login</a>
      </div>
    </nav>
  </header>

  <!-- MAIN CONTENT -->
  <main class="pt-28 px-6 max-w-7xl mx-auto">
    <h1 class="text-3xl sm:text-4xl font-bold mb-8 drop-shadow-lg text-center sm:text-left">ðŸ“š Koleksi Buku Perpustakaan</h1>

    <!-- Grid Buku -->
    <div id="bookGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>

    <!-- Loading -->
    <p id="loading" class="text-center text-gray-400 mt-6">Memuat data buku...</p>
  </main>

  <script>
    async function loadBooks() {
      const grid = document.getElementById("bookGrid");
      const loading = document.getElementById("loading");

      try {
        const response = await fetch("../back-end/buku.php");
        const data = await response.json();
        grid.innerHTML = "";
        loading.style.display = "none";

        if (!Array.isArray(data) || data.length === 0) {
          grid.innerHTML = `<p class='col-span-full text-center text-gray-400'>Belum ada buku tersedia.</p>`;
          return;
        }

        data.forEach(book => {
          const available = book.status.toLowerCase() === "tersedia";
          grid.innerHTML += `
            <a href="peminjaman.html" 
               class="bg-white/10 backdrop-blur-md hover:bg-white/20 transition rounded-2xl p-4 shadow-lg flex flex-col transform hover:scale-105">
              <div class="relative">
                <img src="${book.gambar || '../assets/default-book.jpg'}" 
                     alt="${book.nama}" 
                     class="rounded-xl w-full h-48 object-cover ${available ? '' : 'grayscale opacity-70'} mb-3">
                ${!available ? '<span class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-xl shadow">Tidak Tersedia</span>' : ''}
              </div>
              <h2 class="text-lg font-semibold">${book.nama}</h2>
              <p class="text-sm text-gray-300 mt-1">Kategori: ${book.jenis}</p>
              <p class="text-sm text-gray-400 mt-1">${book.status}</p>
            </a>
          `;
        });
      } catch (err) {
        loading.textContent = "Gagal memuat data buku ðŸ˜¢";
        console.error(err);
      }
    }

    loadBooks();
  </script>

</body>
</html>
